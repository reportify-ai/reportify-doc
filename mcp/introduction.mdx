---
title: 'MCP'
description: 'Reportify MCP 介绍和快速开始指南'
icon: 'plug'
---

## 概述

Reportify MCP 是一个基于 MCP (Model Context Protocol) 协议的金融数据服务，提供文档搜索、公司财务数据、股票行情等丰富的金融信息查询工具。通过 MCP 协议，您可以：

- 搜索和获取金融文档内容
- 查询公司财务数据和基本信息
- 获取实时股票行情和历史数据
- 与智能体进行对话交互

## 核心功能

<CardGroup cols={2}>
  <Card title="文档搜索" icon="magnifying-glass" color="#0072ff">
    提供多种文档搜索能力
    
    - 综合文档搜索（财报、研报、公告等）
    - 语义搜索和内容块检索
    - 按文档类型、股票代码、时间范围筛选
  </Card>
  
  <Card title="公司数据" icon="building" color="#0072ff">
    完整的公司数据查询功能
    
    - 公司基本信息和股东结构
    - 财务三表（资产负债表、利润表、现金流量表）
    - 收入构成和历史股价
  </Card>
  
  <Card title="股票行情" icon="chart-candlestick" color="#0072ff">
    实时和历史行情数据
    
    - 实时报价和 K 线数据
    - 指数价格查询
    - 股票筛选和财报日历
  </Card>
  
  <Card title="Agent 对话" icon="robot" color="#0072ff">
    与智能体的完整对话能力
    
    - 创建和管理对话会话
    - 发送消息并接收响应
    - 获取对话历史和生成文件
  </Card>
</CardGroup>

## 接入配置

### MCP 服务端点

```
https://mcp.reportify.cn/mcp
```

### 客户端配置

<Tabs>
  <Tab title="Cursor">
    在 Cursor 的 MCP 配置文件中添加以下配置：

    ```json
    {
      "mcpServers": {
        "reportify": {
          "url": "https://mcp.reportify.cn/mcp",
          "headers": {
            "Authorization": "Bearer YOUR_API_KEY"
          }
        }
      }
    }
    ```
  </Tab>
  
  <Tab title="Claude Desktop">
    在 Claude Desktop 的配置文件中添加：

    ```json
    {
      "mcpServers": {
        "reportify": {
          "command": "mcp-client",
          "args": ["https://mcp.reportify.cn/mcp"],
          "env": {
            "AUTHORIZATION": "Bearer YOUR_API_KEY"
          }
        }
      }
    }
    ```
  </Tab>
</Tabs>

<Warning>
  必须在配置中包含 `Authorization` 字段，否则请求将无法通过认证
</Warning>

## 认证

所有 MCP 请求都需要在 HTTP 请求头中包含 Bearer Token：

```
Authorization: Bearer YOUR_API_KEY
```

<Info>
  **获取 API Key**
  
  - 将 `YOUR_API_KEY` 替换为您的实际 API Key
  - 注意 `Bearer` 后面有一个空格
  - API Key 可以在 [Reportify 控制台](https://reportify.cn/developer) 获取
</Info>

## Tools 参考

<AccordionGroup>
  <Accordion title="文档搜索类" icon="magnifying-glass" defaultOpen>
  
  ### docs_search
  根据指定条件搜索文档。

  | 参数 | 类型 | 必填 | 说明 |
  |------|------|------|------|
  | `query` | string | 是 | 搜索关键词 |
  | `num` | integer | 否 | 返回结果数量，默认 10 |
  | `symbols` | string[] | 否 | 股票代码列表 |
  | `industries` | string[] | 否 | 行业筛选 |
  | `channel_ids` | string[] | 否 | 渠道 ID 列表 |
  | `start_datetime` | string | 否 | 开始时间 |
  | `end_datetime` | string | 否 | 结束时间 |

  ### chunks_search
  根据指定条件进行语义搜索文档内容块。

  | 参数 | 类型 | 必填 | 说明 |
  |------|------|------|------|
  | `query` | string | 是 | 搜索关键词 |
  | `num` | integer | 否 | 返回结果数量 |
  | `symbols` | string[] | 否 | 股票代码列表 |
  | `start_datetime` | string | 否 | 开始时间 |
  | `end_datetime` | string | 否 | 结束时间 |

  ### document_fetch
  根据文档 ID 获取文档详细内容。

  | 参数 | 类型 | 必填 | 说明 |
  |------|------|------|------|
  | `doc_id` | string | 是 | 文档 ID |

  ### V2 搜索接口

  #### comprehensive_search
  综合搜索金融投资文档，涵盖财报、会议、研报、公告、新闻、社交媒体等。

  | 参数 | 类型 | 必填 | 说明 |
  |------|------|------|------|
  | `query` | string | 是 | 搜索关键词 |
  | `num` | integer | 否 | 返回结果数量 |
  | `symbols` | string[] | 否 | 股票代码列表 |
  | `doc_types` | string[] | 否 | 文档类型筛选 |
  | `start_datetime` | string | 否 | 开始时间 |
  | `end_datetime` | string | 否 | 结束时间 |

  #### earnings_search
  搜索财报相关文档。

  #### conferences_search
  搜索非财报电话会议资料。

  #### reports_search
  搜索机构研究报告。

  #### filings_search
  搜索公司公告。

  #### news_search
  搜索金融投资新闻。

  #### socials_search
  搜索社交媒体内容。

  #### webpage_search
  搜索网页内容。

  <Info>
    V2 搜索接口参数结构与 comprehensive_search 类似，具体参数请参考对应接口文档
  </Info>
  
  </Accordion>

  <Accordion title="公司数据类" icon="building">
  
  ### get_company_overview
  获取公司基本信息概览。

  | 参数 | 类型 | 必填 | 说明 |
  |------|------|------|------|
  | `symbol` | string | 是 | 股票代码，如 `AAPL`、`0700.HK` |

  ### get_company_shareholders
  获取公司股东信息。

  | 参数 | 类型 | 必填 | 说明 |
  |------|------|------|------|
  | `symbol` | string | 是 | 股票代码 |

  ### get_company_stock_prices
  获取公司历史股价数据。

  | 参数 | 类型 | 必填 | 说明 |
  |------|------|------|------|
  | `symbol` | string | 是 | 股票代码 |
  | `start_date` | string | 否 | 开始日期 |
  | `end_date` | string | 否 | 结束日期 |

  ### 财务报表

  #### get_company_balance_sheet
  获取公司资产负债表数据。

  #### get_company_income_statement
  获取公司利润表数据。

  #### get_company_cashflow_statement
  获取公司现金流量表数据。

  #### get_company_revenue_breakdown
  获取公司收入构成细分数据。

  **公共参数**：

  | 参数 | 类型 | 必填 | 说明 |
  |------|------|------|------|
  | `symbol` | string | 是 | 股票代码 |
  | `period` | string | 否 | 报告周期（annual/quarterly） |
  | `limit` | integer | 否 | 返回记录数量 |
  
  </Accordion>

  <Accordion title="股票行情类" icon="chart-candlestick">
  
  ### get_stock_realtime_quote
  获取股票实时行情报价。

  | 参数 | 类型 | 必填 | 说明 |
  |------|------|------|------|
  | `symbols` | string[] | 是 | 股票代码列表 |

  ### get_stock_kline
  获取股票 K 线数据。

  | 参数 | 类型 | 必填 | 说明 |
  |------|------|------|------|
  | `symbol` | string | 是 | 股票代码 |
  | `interval` | string | 否 | K 线周期 |
  | `start_date` | string | 否 | 开始日期 |
  | `end_date` | string | 否 | 结束日期 |
  | `limit` | integer | 否 | 返回数据条数 |

  ### get_index_prices
  获取指数价格数据。

  | 参数 | 类型 | 必填 | 说明 |
  |------|------|------|------|
  | `symbols` | string[] | 是 | 指数代码列表 |
  | `start_date` | string | 否 | 开始日期 |
  | `end_date` | string | 否 | 结束日期 |

  ### get_stock_screener
  股票筛选器，根据条件筛选股票。

  | 参数 | 类型 | 必填 | 说明 |
  |------|------|------|------|
  | `market` | string | 否 | 市场（US/HK/CN） |
  | `industry` | string | 否 | 行业筛选 |
  | `market_cap_min` | number | 否 | 最小市值 |
  | `market_cap_max` | number | 否 | 最大市值 |
  | `limit` | integer | 否 | 返回数量 |

  ### 日历数据

  #### get_stock_earnings_calendar
  获取财报发布日历。

  #### get_stock_ipo_calendar_hk
  获取港股 IPO 日历。

  **公共参数**：

  | 参数 | 类型 | 必填 | 说明 |
  |------|------|------|------|
  | `start_date` | string | 否 | 开始日期 |
  | `end_date` | string | 否 | 结束日期 |
  | `symbols` | string[] | 否 | 股票代码列表 |
  
  </Accordion>

  <Accordion title="Agent 对话类" icon="robot">
  
  ### create_conversation
  创建一个新的 Agent 对话会话。

  | 参数 | 类型 | 必填 | 说明 |
  |------|------|------|------|
  | `title` | string | 否 | 会话标题 |

  **返回值**: 包含 `conversation_id` 的响应对象

  ### agent_chat
  向 Agent 发送消息进行对话。

  | 参数 | 类型 | 必填 | 说明 |
  |------|------|------|------|
  | `conversation_id` | string | 是 | 会话 ID |
  | `message` | string | 是 | 用户消息内容 |

  ### 会话管理

  #### get_conversation
  获取会话详情。

  #### get_conversation_message
  获取会话中的消息详情。

  #### conversation_list_message
  列出会话中的所有消息。

  #### cancel_conversation
  取消正在执行的 Agent 任务。

  #### get_agent_file
  获取 Agent 生成的文件。

  **公共参数**：所有接口都需要 `conversation_id`，部分接口需要 `message_id` 或 `file_id`
  
  </Accordion>
</AccordionGroup>

## 快速开始

<Tabs>
  <Tab title="搜索财报">
    搜索苹果公司最近的财报相关文档：

    ```json
    {
      "tool": "earnings_search",
      "parameters": {
        "query": "revenue growth",
        "symbols": ["AAPL"],
        "num": 5
      }
    }
    ```
  </Tab>

  <Tab title="获取公司数据">
    获取特斯拉公司的基本信息：

    ```json
    {
      "tool": "get_company_overview",
      "parameters": {
        "symbol": "TSLA"
      }
    }
    ```
  </Tab>

  <Tab title="获取实时行情">
    获取多只科技股的实时报价：

    ```json
    {
      "tool": "get_stock_realtime_quote",
      "parameters": {
        "symbols": ["AAPL", "GOOGL", "MSFT", "NVDA"]
      }
    }
    ```
  </Tab>

  <Tab title="搜索研报">
    搜索 AI 行业相关的研究报告：

    ```json
    {
      "tool": "reports_search",
      "parameters": {
        "query": "artificial intelligence market analysis",
        "industries": ["Technology"],
        "num": 10,
        "start_datetime": "2025-01-01 00:00:00"
      }
    }
    ```
  </Tab>
</Tabs>

## 股票代码格式

不同市场的股票代码格式如下：

| 市场 | 格式 | 示例 |
|------|------|------|
| 美股 | 直接使用代码 | `AAPL`, `GOOGL`, `TSLA` |
| 港股 | 代码.HK | `0700.HK`, `9988.HK` |
| A股 | 代码.SH / 代码.SZ | `600519.SH`, `000001.SZ` |

## 错误处理

MCP 调用使用标准的 HTTP 状态码：

- `200` - 请求成功
- `400` - 请求参数错误
- `401` - 认证失败（API Key 无效或未提供）
- `404` - 请求的资源不存在
- `429` - 请求频率超限
- `500` - 服务器内部错误

错误响应示例：

```json
{
  "error": "Invalid symbol format"
}
```

## 最佳实践

<Warning>
  **保护 API Key**
  
  请妥善保管您的 API Key，避免在公开场所泄露：
  - 不要将 API Key 提交到代码仓库
  - 使用环境变量或配置文件管理
  - 定期轮换 API Key
</Warning>

<Tip>
  **合理使用参数**
  
  优化查询性能和结果质量：
  - 使用时间范围缩小搜索范围
  - 通过股票代码精确筛选
  - 合理设置返回结果数量
</Tip>

<Info>
  **处理数据延迟**
  
  实时行情数据可能存在延迟：
  - 实时数据通常有 15 分钟延迟
  - 历史数据每日更新
  - 财务数据以公告时间为准
</Info>

<Note>
  **时间格式规范**
  
  时间参数使用统一格式：
  - 日期时间：`YYYY-MM-DD HH:mm:ss`（如 `2025-01-01 00:00:00`）
  - 仅日期：`YYYY-MM-DD`（如 `2025-01-01`）
</Note>
